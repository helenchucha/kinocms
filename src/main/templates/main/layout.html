{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'main/css/core.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
<!-- Блок юзера -->
<!--<div class="top-user-menu d-flex justify-content-end p-2 bg-light border-bottom">-->
<!--    <i class="nav-icon bi bi-newspaper"></i>-->
<!--    <li class="nav-item dropdown user-menu">-->
<!--        <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">-->
<!--            <img-->
<!--                    src="{% static 'dist/assets/img/user2-160x160.jpg' %}"-->
<!--                    class="user-image rounded-circle shadow me-2"-->
<!--                    alt="User Image"-->
<!--                    style="width:40px; height:40px;"-->
<!--            />-->
<!--            {% if user.is_authenticated %}-->
<!--            <span>{{ user.get_full_name|default:user.username }}</span>-->
<!--            {% else %}-->
<!--            <span>Гість</span>-->
<!--            {% endif %}-->
<!--        </a>-->
<!--        <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end p-2">-->
<!--            &lt;!&ndash; User info &ndash;&gt;-->
<!--            <li class="text-center mb-2">-->
<!--                <img-->
<!--                        src="{% static 'dist/assets/img/user2-160x160.jpg' %}"-->
<!--                        class="rounded-circle shadow mb-2"-->
<!--                        alt="User Image"-->
<!--                        style="width:60px; height:60px;"-->
<!--                />-->
<!--                {% if user.is_authenticated %}-->
<!--                <p class="mb-0">-->
<!--                    {{ user.get_full_name|default:user.username }}-->
<!--                    <br>-->
<!--                    <small>Member since {{ user.date_joined|date:"b Y" }}</small>-->
<!--                </p>-->
<!--                {% else %}-->
<!--                <p class="mb-0">Гість</p>-->
<!--                {% endif %}-->
<!--            </li>-->
<!--            &lt;!&ndash; Menu buttons &ndash;&gt;-->
<!--            <li class="px-2">-->
<!--                <a href="#" class="d-block mb-2 btn btn-sm btn-primary w-100">Profile</a>-->
<!--                {% if user.is_authenticated %}-->
<!--                <a href="{% url 'logout' %}" class="d-block btn btn-sm btn-danger w-100">Sign out</a>-->
<!--                {% else %}-->
<!--                <a href="{% url 'login' %}" class="d-block btn btn-sm btn-success w-100">Login</a>-->
<!--                {% endif %}-->
<!--            </li>-->
<!--        </ul>-->
<!--    </li>-->
<!--</div>-->

<div class="top-user-menu d-flex justify-content-end p-2 bg-light border-bottom align-items-center">
    <!-- Іконка користувача -->
    <i class="bi bi-person-fill me-2"></i>

    <!-- Виведення імені або "Гість" -->
    {% if user.is_authenticated %}
    <span>{{ user.nickname|default:user.username }}</span>
    {% else %}
    <span>Гость</span>
    {% endif %}

    <!-- Кнопки для автентифікованих користувачів -->
    {% if user.is_authenticated %}
    <a href="{% url 'profile' %}" class="btn btn-sm btn-primary ms-3">
        Личный кабинет
    </a>
    {% if user.is_staff %}
    <a href="{% url 'admin_panel' %}" class="btn btn-sm btn-primary ms-3">
        Админ панель
    </a>
    {% endif %}
    <!-- Форма для виходу -->
    <form method="post" action="{% url 'logout' %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-sm btn-danger ms-2 d-flex align-items-center"
                style="border:none; background:#dc3545; padding:4px 8px; cursor:pointer;">
            Выйти &nbsp;<i class="bi bi-escape"></i>
        </button>
    </form>
    {% else %}
    <!-- Кнопки для гостей -->
    <a href="{% url 'login' %}" class="btn btn-sm btn-success ms-3">Логин</a>
    <a href="{% url 'register' %}" class="btn btn-sm btn-secondary ms-2">Регистрация</a>
    {% endif %}
</div>

<!-- Банер -->
<div class="banner-top">
    <img src="{% static 'main/img/bn2.jpg' %}" alt="Банер" class="img-fluid w-100"/>
    <div class="banner-text">
        Покупайте электронные билеты и обходите очереди на кассах!<br/>
        ОТПРАВЛЯЙТЕСЬ СРАЗУ В ЗАЛ!
    </div>
</div>

<header class="header-container">
    <div class="header-wrapper d-flex align-items-center justify-content-between px-3">
        <!-- Логотип -->
        <div class="logo">
            <a href="/"><img src="{% static 'main/img/logo.jpg' %}" alt="Logo"></a>
        </div>

        <!-- Другий блок: Верхній і Нижній -->
        <div class="header-main flex-fill ms-3">
            <!-- Верхній підблок -->
            <div class="top-row d-flex justify-content-between align-items-center mb-2">
                <!-- Пошук -->
                <div class="search flex-fill mx-2">
                    <input type="text" class="form-control" placeholder="Поиск..."/>
                </div>
                <!-- Соцмережі -->
                <div class="socials mx-2">
                    <a href="#"><i class="bi bi-facebook fs-3 me-2"></i></a> <a href="#"><i
                        class="bi bi-twitter fs-3 me-2"></i></a> <a href="#"><i
                        class="bi bi-instagram fs-3 me-2"></i></a>
                </div>
                <!-- Телефони -->
                <div class="phones mx-2">
                    {% if phone1 %}
                    <a href="tel:{{ phone1 }}" class="phone-link">{{ phone1 }}</a>
                    {% endif %}
                    {% if phone2 %}
                    <a href="tel:{{ phone2 }}" class="phone-link">{{ phone2 }}</a>
                    {% endif %}
                </div>
            </div>

            <!-- Нижній підблок -->
            <div class="bottom-row d-flex justify-content-between align-items-center">
                <!-- Меню -->
                <nav class="navbar navbar-expand-sm p-0">
                    {% for item in menu_items %}
                    {% if item.children and item.children.all %}
                    <!-- Пункт з підменю -->
                    <div class="dropdown">
                        {% with clean_slug=item.slug|cut:'/' %}
                        <a class="nav-link dropdown-toggle"
                           href="{% if item.url_name and item.slug %}{% url item.url_name slug=clean_slug %}{% else %}#{% endif %}"
                           id="dropdown{{ forloop.counter }}" data-bs-toggle="dropdown" aria-expanded="false"
                           style="cursor: pointer;">
                            {{ item.name }}
                        </a>
                        {% endwith %}
                        <ul class="dropdown-menu" aria-labelledby="dropdown{{ forloop.counter }}">
                            {% for child in item.children.all %}
                            {% if child.url_name and child.slug %}
                            {% with clean_child_slug=child.slug|cut:'/' %}
                            <li><a class="dropdown-item" href="{% url child.url_name slug=clean_child_slug %}">{{
                                child.title }}</a></li>
                            {% endwith %}
                            {% else %}
                            <li><span class="dropdown-item">{{ child.title }}</span></li>
                            {% endif %}
                            {% endfor %}
                        </ul>
                    </div>
                    {% else %}
                    <!-- Без підменю -->
                    {% with clean_slug=item.slug|cut:'/' %}
                    {% if item.url_name and item.slug %}
                    <a class="nav-link" href="{% if item.url_name and item.slug %}{% url item.url_name slug=clean_slug %}{% else %}#{% endif %}" style="cursor: pointer;">{{ item.name }}</a>
                    {% else %}
                    <span style="cursor: pointer;">{{ item.name }}</span>
                    {% endif %}
                    {% endwith %}
                    {% endif %}
                    {% endfor %}
                </nav>

                <!-- Зміна мови -->
                <div class="language ms-3">
                    <select class="form-select form-select-sm w-auto">
                        <option selected>Рус</option>
                        <option value="uk">Укр</option>
                    </select>
                </div>
            </div>


        </div>
    </div>
</header>
<main>
    <div class="content-container">
        {% block content %}

        {% endblock %}
    </div>
</main>

<!-- Footer -->
<footer class="footer bg-light py-4 mt-4">
    <div class="container d-flex justify-content-between flex-wrap">

        <!-- Блок 1: Мобильные приложения -->
        <div class="footer-block mb-3" style="min-width:200px;">
            <h5>Мобильные приложения</h5>
            <ul class="list-unstyled">
                <li><a href="#">Android</a></li>
                <li><a href="#">iOS</a></li>
                <li><a href="#">Windows</a></li>
            </ul>
        </div>

        <!-- Блок 2: Пункты меню (окрім "О кинотеатре") -->


        <!-- Блок 3: "О кинотеатре" -->
        <div class="footer-block mb-3" style="min-width:200px;">
            <h5>О кинотеатре</h5>
        </div>

        <!-- Блок 4: Иконки соцсетей -->
        <div class="footer-block mb-3 d-flex flex-column align-items-center" style="min-width:200px;">
            <div class="social-icons d-flex gap-3">
                <a href="#" class="text-dark"><i class="bi bi-facebook fs-4"></i></a>
                <a href="#" class="text-dark"><i class="bi bi-twitter fs-4"></i></a>
                <a href="#" class="text-dark"><i class="bi bi-instagram fs-4"></i></a>
                <a href="#" class="text-dark"><i class="bi bi-telegram fs-4"></i></a>
            </div>
        </div>

    </div>
</footer>

<div class="bottom-line bg-light text-center py-2">
    @KinoCMS 2025
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>